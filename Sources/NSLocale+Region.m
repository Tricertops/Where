//
//  NSLocale+Region.m
//  Where
//
//  Created by Martin Kiss on 22.11.14.
//  Copyright (c) 2014 Triceratops. All rights reserved.
//

#import "NSLocale+Region.h"


@implementation NSLocale (Region)


#pragma mark Standard

+ (instancetype)standardLocale {
    return [NSLocale localeWithLocaleIdentifier:@"en_US_POSIX"];
}


#pragma mark Region

- (NSString *)regionCode {
    return [self objectForKey:NSLocaleCountryCode];
}

+ (NSString *)canonizeRegionCode:(NSString *)regionCode {
    if ( ! regionCode) return nil;
    NSString *identifier = [NSLocale localeIdentifierFromComponents:@{ NSLocaleCountryCode: regionCode }];
    NSLocale *locale = [NSLocale localeWithLocaleIdentifier:identifier];
    return [locale objectForKey:NSLocaleCountryCode];
}

+ (NSString *)nameOfRegion:(NSString *)regionCode {
    if ( ! regionCode) return nil;
    return [[NSLocale standardLocale] displayNameForKey:NSLocaleCountryCode value:regionCode];
}


#pragma mark Coordinates

- (CLLocationCoordinate2D)regionCoordinate {
    return [NSLocale coordinateForRegion:self.regionCode];
}

+ (CLLocationCoordinate2D)coordinateForRegion:(NSString *)regionCode {
    NSString *canonized = [self canonizeRegionCode:regionCode];
    if ( ! canonized.length) return kCLLocationCoordinate2DInvalid;
    
    NSArray<NSNumber *> *array = [[self regionCoordinates] objectForKey:canonized];
    if (array.count != 2) return kCLLocationCoordinate2DInvalid;
    
    return CLLocationCoordinate2DMake([array[0] doubleValue], [array[1] doubleValue]);
}

+ (NSDictionary<NSString *, NSArray<NSNumber *> *> *)regionCoordinates {
    static NSDictionary<NSString *, NSArray<NSNumber *> *> *coordinates = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        coordinates = @{
                        @"AD": @[ @42.54226825, @1.59686475 ],
                        @"AE": @[ @24.35874462, @53.98249435 ],
                        @"AF": @[ @33.930445, @67.6789455 ],
                        @"AG": @[ @17.363183, @-61.789423 ],
                        @"AI": @[ @18.2251195, @-63.07213 ],
                        @"AL": @[ @41.156986, @20.181222 ],
                        @"AM": @[ @40.066181, @45.11110752 ],
                        @"AO": @[ @-11.209451, @17.880669 ],
                        @"AQ": @[ @-90, @0 ], // Antarctica
                        @"AR": @[ @-38.4212955, @-63.5874025 ],
                        @"AS": @[ @-12.716089, @-170.2539825 ],
                        @"AT": @[ @47.6975425, @13.349319 ],
                        @"AU": @[ @-26.8533875, @133.2751545 ],
                        @"AW": @[ @12.51771292, @-69.96511246 ],
                        @"AX": @[ @60.1978055, @20.164778 ],
                        @"AZ": @[ @40.14739626, @47.572098 ],
                        @"BA": @[ @43.8926525, @17.670584 ],
                        @"BB": @[ @13.1835505, @-59.534649 ],
                        @"BD": @[ @23.6876395, @90.351002 ],
                        @"BE": @[ @50.499527, @4.4754025 ],
                        @"BF": @[ @12.2418505, @-1.5567605 ],
                        @"BG": @[ @42.729862, @25.4916665 ],
                        @"BH": @[ @26.0397225, @50.5593055 ],
                        @"BI": @[ @-3.387918, @29.920395 ],
                        @"BJ": @[ @9.3220475, @2.313138 ],
                        @"BL": @[ @17.90349601, @-62.8314476 ],
                        @"BM": @[ @32.320236, @-64.7740215 ],
                        @"BN": @[ @4.525125, @114.715443 ],
                        @"BO": @[ @-16.28835, @-63.549429 ],
                        @"BQ": @[ @12.160842, @-68.3043825 ],
                        @"BR": @[ @-14.2429145, @-53.1892665 ],
                        @"BS": @[ @24.885993, @-76.7098925 ],
                        @"BT": @[ @27.515709, @90.4424555 ],
                        @"BV": @[ @-54.4313525, @3.4117375 ],
                        @"BW": @[ @-22.3440295, @24.680158 ],
                        @"BY": @[ @53.711111, @27.973847 ],
                        @"BZ": @[ @17.1929285, @-88.50090 ],
                        @"CA": @[ @62.393303, @-96.8181455 ],
                        @"CC": @[ @-12.14059247, @96.87321538 ],
                        @"CD": @[ @-4.0347885, @21.755028 ],
                        @"CF": @[ @6.6140415, @20.941759 ],
                        @"CG": @[ @-0.6620705, @14.927424 ],
                        @"CH": @[ @46.8155135, @8.224472 ],
                        @"CI": @[ @7.5468545, @-5.5470995 ],
                        @"CK": @[ @-15.983639, @-159.202896 ],
                        @"CL": @[ @-36.7119505, @-73.601704 ],
                        @"CM": @[ @7.365302, @12.3434395 ],
                        @"CN": @[ @34.668138, @104.165802 ],
                        @"CO": @[ @4.5773165, @-74.298973 ],
                        @"CR": @[ @9.624897, @-84.2533075 ],
                        @"CU": @[ @21.5270625, @-79.5446015 ],
                        @"CV": @[ @16.0026, @-24.014095 ],
                        @"CW": @[ @12.2092085, @-68.945576 ],
                        @"CX": @[ @-10.4914195, @105.62293699 ],
                        @"CY": @[ @35.16740584, @33.4354995 ],
                        @"CZ": @[ @49.800901, @15.4781525 ],
                        @"DE": @[ @51.1657065, @10.452764 ],
                        @"DJ": @[ @11.808375, @42.5952225 ],
                        @"DK": @[ @56.155403, @11.6172225 ],
                        @"DM": @[ @15.4167495, @-61.36413 ],
                        @"DO": @[ @18.736509, @-70.1617435 ],
                        @"DZ": @[ @28.0268755, @1.65284 ],
                        @"EC": @[ @-1.7799015, @-78.131592 ],
                        @"EE": @[ @58.5962085, @25.023778 ],
                        @"EG": @[ @26.6963615, @30.246486 ],
                        @"EH": @[ @24.221916, @-12.886729 ],
                        @"ER": @[ @15.1813195, @39.786709 ],
                        @"ES": @[ @39.8960265, @-2.4876945 ],
                        @"ET": @[ @9.148086, @40.493059 ],
                        @"FI": @[ @64.9524155, @26.068944 ],
                        @"FJ": @[ @-16.5780405, @-0.647552 ],
                        @"FK": @[ @-51.800581, @-59.528839 ],
                        @"FM": @[ @5.557665, @150.186825 ],
                        @"FO": @[ @61.897846, @-6.9287915 ],
                        @"FR": @[ @46.232193, @2.209667 ],
                        @"GA": @[ @-0.828097, @11.598909 ],
                        @"GB": @[ @54.633221, @-3.4322775 ],
                        @"GD": @[ @12.15258846, @-61.68955685 ],
                        @"GE": @[ @42.319847, @43.368055 ],
                        @"GF": @[ @3.951795, @-53.07823 ],
                        @"GG": @[ @49.575693, @-2.4231805 ],
                        @"GH": @[ @7.955012, @-1.0318195 ],
                        @"GI": @[ @36.13223492, @-5.35227333 ],
                        @"GL": @[ @71.702379, @-42.1771745 ],
                        @"GM": @[ @13.4454115, @-15.311436 ],
                        @"GN": @[ @9.9348865, @-11.283845 ],
                        @"GP": @[ @16.1922065, @-61.2723825 ],
                        @"GQ": @[ @1.6339245, @10.3412945 ],
                        @"GR": @[ @38.27528316, @23.81034337 ],
                        @"GS": @[ @-56.724863, @-32.1252505 ],
                        @"GT": @[ @15.776261, @-90.229744 ],
                        @"GU": @[ @13.446472, @144.786613 ],
                        @"GW": @[ @11.802527, @-15.1770285 ],
                        @"GY": @[ @4.8663235, @-58.9325065 ],
                        @"HK": @[ @22.356514, @114.136253 ],
                        @"HM": @[ @-53.0507085, @73.2278405 ],
                        @"HN": @[ @14.7463335, @-86.2530975 ],
                        @"HR": @[ @44.48732, @16.4603055 ],
                        @"HT": @[ @19.054426, @-73.045971 ],
                        @"HU": @[ @47.1646385, @19.5089445 ],
                        @"ID": @[ @-2.518722, @118.015568 ],
                        @"IE": @[ @53.4197505, @-8.2404725 ],
                        @"IL": @[ @31.418388, @35.07354138 ],
                        @"IM": @[ @54.23782, @-4.555111 ],
                        @"IN": @[ @21.125681, @82.794998 ],
                        @"IO": @[ @-6.3531805, @71.876568 ],
                        @"IQ": @[ @33.223737, @43.6859015 ],
                        @"IR": @[ @32.4206525, @53.682375 ],
                        @"IS": @[ @64.9639415, @-19.0211695 ],
                        @"IT": @[ @41.8739875, @12.564167 ],
                        @"JE": @[ @49.2174455, @-2.1410555 ],
                        @"JM": @[ @18.115265, @-77.2734795 ],
                        @"JO": @[ @31.276778, @37.130583 ],
                        @"JP": @[ @34.886306, @134.379711 ],
                        @"KE": @[ @0.1709455, @37.9039685 ],
                        @"KG": @[ @41.205528, @74.779888 ],
                        @"KH": @[ @12.54775, @104.98386 ],
                        @"KI": @[ @-3.358734, @9.670395 ],
                        @"KM": @[ @-11.875119, @43.8770065 ],
                        @"KN": @[ @17.2577305, @-62.706413 ],
                        @"KP": @[ @40.339693, @127.4953765 ],
                        @"KR": @[ @35.9016955, @127.7358895 ],
                        @"KW": @[ @29.310278, @47.493515 ],
                        @"KY": @[ @19.5123645, @-80.5800245 ],
                        @"KZ": @[ @48.193764, @66.9022635 ],
                        @"LA": @[ @18.205208, @103.8950425 ],
                        @"LB": @[ @33.872639, @35.8767355 ],
                        @"LC": @[ @13.9040115, @-60.9741765 ],
                        @"LI": @[ @47.1646955, @9.555 ],
                        @"LK": @[ @7.874097, @80.7670975 ],
                        @"LR": @[ @6.452424, @-9.428598 ],
                        @"LS": @[ @-29.620511, @28.2474145 ],
                        @"LT": @[ @55.174112, @23.906736 ],
                        @"LU": @[ @49.8157635, @6.131514 ],
                        @"LV": @[ @56.8755835, @24.607722 ],
                        @"LY": @[ @26.338522, @17.268816 ],
                        @"MA": @[ @31.79230585, @-7.080168 ],
                        @"MC": @[ @43.73834778, @7.42445076 ],
                        @"MD": @[ @46.9795265, @28.3771945 ],
                        @"ME": @[ @42.7101515, @19.4100695 ],
                        @"MF": @[ @18.0912925, @-63.08288 ],
                        @"MG": @[ @-18.7771925, @46.854328 ],
                        @"MH": @[ @10.1038195, @168.728363 ],
                        @"MK": @[ @41.611, @21.751417 ],
                        @"ML": @[ @17.5797575, @-3.998823 ],
                        @"MM": @[ @19.163916, @96.6830295 ],
                        @"MN": @[ @46.8609445, @103.8369865 ],
                        @"MO": @[ @22.2013615, @113.54739 ],
                        @"MP": @[ @17.331835, @145.47577 ],
                        @"MQ": @[ @14.6355405, @-61.022814 ],
                        @"MR": @[ @21.00681, @-10.9470975 ],
                        @"MS": @[ @16.74941457, @-62.19274125 ],
                        @"MT": @[ @35.9461515, @14.3846115 ],
                        @"MU": @[ @-15.422486, @60.0064485 ],
                        @"MV": @[ @3.2028335, @73.165249 ],
                        @"MW": @[ @-13.2462705, @34.2953855 ],
                        @"MX": @[ @23.6248125, @-102.5786705 ],
                        @"MY": @[ @4.1093195, @109.455475 ],
                        @"MZ": @[ @-18.670284, @35.530157 ],
                        @"NA": @[ @-22.965662, @18.4861655 ],
                        @"NC": @[ @-21.123889, @165.846901 ],
                        @"NE": @[ @17.6110005, @8.0809465 ],
                        @"NF": @[ @-29.02912371, @167.95658485 ],
                        @"NG": @[ @9.0845755, @8.6742525 ],
                        @"NI": @[ @12.866726, @-85.2142985 ],
                        @"NL": @[ @52.133057, @5.29525 ],
                        @"NO": @[ @64.5830135, @17.86410976 ],
                        @"NP": @[ @28.395056, @84.1278035 ],
                        @"NR": @[ @-0.5283195, @166.9221575 ],
                        @"NU": @[ @-19.051631, @-169.8630905 ],
                        @"NZ": @[ @-40.837847, @-6.64225 ],
                        @"OM": @[ @21.516861, @55.859291 ],
                        @"PA": @[ @8.41771, @-80.1127775 ],
                        @"PE": @[ @-9.1813525, @-75.002365 ],
                        @"PF": @[ @-17.7785725, @-143.903496 ],
                        @"PG": @[ @-6.48825, @148.4031525 ],
                        @"PH": @[ @12.8819585, @121.7665405 ],
                        @"PK": @[ @30.441861, @69.359766 ],
                        @"PL": @[ @51.9227505, @19.1368745 ],
                        @"PM": @[ @46.9661635, @-56.3368245 ],
                        @"PN": @[ @-24.494215, @-126.559643 ],
                        @"PR": @[ @18.2232855, @-66.5927315 ],
                        @"PS": @[ @31.881464, @34.89497757 ],
                        @"PT": @[ @39.553444, @-7.839319 ],
                        @"PW": @[ @5.63663, @132.920475 ],
                        @"PY": @[ @-23.4513895, @-58.453215 ],
                        @"QA": @[ @25.318833, @51.19693 ],
                        @"RE": @[ @-21.114533, @55.5320625 ],
                        @"RO": @[ @45.9471245, @24.9805135 ],
                        @"RS": @[ @44.20680237, @20.91100883 ],
                        @"RU": @[ @61.5231115, @-74.9 ],
                        @"RW": @[ @-1.94708, @29.876376 ],
                        @"SA": @[ @23.8862915, @45.0811385 ],
                        @"SB": @[ @-9.220083, @161.2447355 ],
                        @"SC": @[ @-7.018792, @51.242138 ],
                        @"SD": @[ @15.45847034, @30.21763611 ],
                        @"SE": @[ @62.199806, @17.63749324 ],
                        @"SG": @[ @1.364917, @103.822872 ],
                        @"SH": @[ @-11.953679, @-10.0299915 ],
                        @"SI": @[ @46.1455285, @14.9745415 ],
                        @"SJ": @[ @79.9911955, @25.4933615 ],
                        @"SK": @[ @48.6656395, @19.709097 ],
                        @"SL": @[ @8.4648055, @-11.7959345 ],
                        @"SM": @[ @43.94297326, @12.46003542 ],
                        @"SN": @[ @14.499454, @-14.4455615 ],
                        @"SO": @[ @5.152149, @46.1996155 ],
                        @"SR": @[ @3.9178455, @-56.032028 ],
                        @"SS": @[ @7.85627151, @30.0404129 ],
                        @"ST": @[ @0.8630445, @6.968272 ],
                        @"SV": @[ @13.796873, @-88.910412 ],
                        @"SX": @[ @18.04097, @-63.078516 ],
                        @"SY": @[ @34.8149015, @39.0561255 ],
                        @"SZ": @[ @-26.5183745, @31.4656835 ],
                        @"TC": @[ @21.692252, @-71.8037565 ],
                        @"TD": @[ @15.4457185, @18.738068 ],
                        @"TF": @[ @-43.762953, @63.884533 ],
                        @"TG": @[ @8.621697, @0.8296845 ],
                        @"TH": @[ @13.036597, @101.4925155 ],
                        @"TJ": @[ @38.8581945, @71.26218 ],
                        @"TK": @[ @-8.9673624, @-171.85588074 ],
                        @"TL": @[ @-8.7997303, @125.67734528 ],
                        @"TM": @[ @38.968319, @59.5628735 ],
                        @"TN": @[ @33.892166, @9.5615555 ],
                        @"TO": @[ @-18.5090225, @-174.794922 ],
                        @"TR": @[ @38.9615155, @35.25175 ],
                        @"TT": @[ @10.6872235, @-61.220852 ],
                        @"TV": @[ @-8.2215705, @177.964073 ],
                        @"TW": @[ @23.600028, @120.767567 ],
                        @"TZ": @[ @-6.368216, @34.885195 ],
                        @"UA": @[ @48.3798885, @31.1681395 ],
                        @"UG": @[ @1.3651885, @32.3046505 ],
                        @"UM": @[ @13.915404, @-5.3687515 ],
                        @"US": @[ @36.966428, @-95.844032 ],
                        @"UY": @[ @-32.53152, @-55.7583275 ],
                        @"UZ": @[ @41.3797225, @64.5644585 ],
                        @"VA": @[ @41.90385896, @12.45204112 ],
                        @"VC": @[ @12.9809094, @-61.28739159 ],
                        @"VE": @[ @6.414107, @-66.5789265 ],
                        @"VG": @[ @18.5736005, @-64.4920655 ],
                        @"VI": @[ @18.036736, @-64.8017045 ],
                        @"VN": @[ @15.9742225, @105.806431 ],
                        @"VU": @[ @-16.6611945, @168.214882 ],
                        @"WF": @[ @-13.7714255, @-177.1677855 ],
                        @"WS": @[ @-13.736573, @-172.10717 ],
                        @"XK": @[ @42.56230959, @20.8904162 ],
                        @"YE": @[ @15.55554496, @48.53153912 ],
                        @"YT": @[ @-12.8245115, @45.165455 ],
                        @"ZA": @[ @-28.48322, @24.676997 ],
                        @"ZM": @[ @-13.1519165, @27.8525375 ],
                        @"ZW": @[ @-19.0132865, @29.1466665 ],
                        };
    });
    return coordinates;
}

@end

